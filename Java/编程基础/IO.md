# IO



## 整体概念



Java IO 体系看起来类很多，感觉很复杂，但其实是 IO 涉及的因素太多了。在设计 IO 相关的类时，编写者也不是从同一个方面考虑的，所以会给人一种很乱的感觉，并且还有设计模式的使用，更加难以使用这些 IO 类，所以特地对 Java 的 IO 做一个总结。

IO 类设计出来，肯定是为了解决 IO 相关的操作的，想一想哪里会有 IO 操作？网络、磁盘。网络操作相关的类是在 java.net 包下，不在本文的总结范围内。提到磁盘，你可能会想到文件，文件操作在 IO 中是比较典型的操作。在 Java 中引入了 “流” 的概念，它表示任何有能力产生数据源或有能力接收数据源的对象。数据源可以想象成水源，海水、河水、湖水、一杯水等等。数据传输可以想象为水的运输，古代有用桶运水，用竹管运水的，现在有钢管运水，不同的运输方式对应不同的运输特性。

**从数据传输方式看，可以将 IO 类分为：**

- 1、字节流
- 2、字符流

字节流是以一个字节单位来运输的，比如一杯一杯的取水。而字符流是以多个字节来运输的，比如一桶一桶的取水，一桶水又可以分为几杯水。



**字节流和字符流的区别：**

- 字节流读取单个字节，字符流读取单个字符
- 字节流用来处理二进制文件（图片、MP3、视频文件），字符流用来处理文本文件（可以看做是特殊的二进制文件，使用了某种编码，人可以阅读）
- 简而言之，字节是个计算机看的，字符才是给人看的。



## IO类

IO 类虽然很多，但最基本的是 4 个抽象类：InputStream、OutputStream、Reader、Writer。

最基本的方法也就是一个读 read() 方法、一个写 write() 方法。方法具体的实现还是要看继承这 4 个抽象类的子类，毕竟我们平时使用的也是子类对象。这些类中的一些方法都是（Native）本地方法、所以并没有 Java 源代码，这里给出笔者觉得不错的 Java IO 源码分析 [传送门](https://blog.csdn.net/panweiwei1994/article/details/78046000)，按照上面这个思路看，先看子类基本方法，然后在看看子类中还新增了那些方法，相信你也可以看懂的，我这里就只对上后面说的常用的类进行总结。

先来看 InputStream 和 OutStream 中的方法简介，因为都是抽象类、大都是抽象方法、所以就不贴源码喽！**注意这里的读取和写入，其实就是获取（输入）数据和输出数据。**







## 设计模式

IO中大量使用了装饰模式。



### 装饰器公共接口

FilterInputStream和FilterOutputStream是用来提供装饰器类接口以控制特定输入流（InputStream）和输出流（OutputStream）的两个类。所有装饰器都必须实现FilterInputStream或者FilterOutputStream。



#### FilterInputStream

![image-20190421120348826](https://ws2.sinaimg.cn/large/006tNc79gy1g2a4h6aeu9j31ca0s2qgq.jpg)



#### FilterOutputStream

![image-20190421120553005](https://ws3.sinaimg.cn/large/006tNc79gy1g2a4jc22hdj31aw0nak3h.jpg)









## 参考

[IO体系](https://www.jianshu.com/p/715659e4775f)

